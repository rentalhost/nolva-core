import{levenshtein as e}from"./LevenshteinService.js";export function removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}export function slugify(e,r="-"){return removeDiacritics(e.trim().toLowerCase()).replaceAll(/\W+/g,r).replaceAll(/^-+|-+$/g,"")}let r=new Map([[1,new Map([["c","k"],["l","u"],["r",""],["h",""],["z","s"],["x","s"],["n","m"],["b","bi"],["w","u"],["y","i"]])],[2,new Map([["ce","se"],["ci","si"],["ss","s"],["xc","s"],["rr","r"],["ch","s"],["qu","k"],["gu","g"],["ei","e"],["lh","l"],["ph","f"],["th","t"],["rh","r"],["by","bi"],["sy","si"],["oo","o"],["mn","min"],["pn","pin"],["ps","pis"],["gn","gin"],["ba","ba"],["be","be"],["bi","bi"],["bo","bo"],["bu","bu"],["la","la"],["le","le"],["li","li"],["lo","lo"],["lu","lu"],["ra","ra"],["re","re"],["ri","ri"],["ro","ro"],["ru","ru"],["ma","ma"],["me","me"],["mi","mi"],["mo","mo"],["mu","mu"],["na","na"],["ne","ne"],["ni","ni"],["no","no"],["nu","nu"]])],[3,new Map([["cao","sao"],["coe","soe"],["bri","br"],["s**",""],["l**","u"],["ti*","te"],["ult","ut"]])]]);export function normalizeWord(e){let i=`${slugify(e)}**`,n=i.length-2,t="",o=0;e:for(;o<n;){for(let e=3;e>=1;e--){let n=i.substring(o,o+e),l=r.get(e)?.get(n);if(void 0!==l){t+=l,o+=e;continue e}}t+=i[o],o++}return t}export function similarity(r,i){if(r===i)return 1;if(""===r||""===i)return 0;let n=r.length,t=i.length,o=Math.max(n,t),l=e(r,i);return Math.max(0,Math.min(1,(1-l/o)**(1+3/((n+t)/2))))}